jQuery(function(a){a('.lws-adminpanel-activation-form input[type="submit"].lws-adm-btn').click(function(f){var e=a(this).closest(".lws-adminpanel-activation-form");var c=a("#lws_adm_install_pro_cb").prop("checked");if(e.length>0){var b=e.closest(".lws-activation");var d=e.find("input[type='submit']");d.addClass("lw_waiting_button").prop("disabled",true);var g={};e.find("input[type!='submit']").each(function(){g[a(this).attr("name")]=a(this).val()});a.post(lwsActivationUrl,g,function(h){b.children("div").hide();if(0!=h){var i=b.find(h.ok?".lws-activation-success":".lws-activation-error");i.show();if(h.html!=undefined){i.append(h.html)}if(h.redirect!=undefined&&c&&h.redirect.length>0){document.location=h.redirect}}else{b.find(".lws-activation-error").show().append("<p>A problem occured on the server, please retry later.</p>")}},"json").fail(function(i,j,h){b.children("div").hide();b.find(".lws-activation-error").show().append("<p>Connection problem:<br/>"+j+", "+h+"</p>")}).done(function(){d.removeClass("lw_waiting_button").prop("disabled",false)});f.preventDefault();return false}});a(".lws-second-activation-method").click(function(){var b=a(this).parent().next("div");if(b.is(":visible")){b.slideUp()}else{b.slideDown()}});a(".lws-table-of-content").on("click",'.lws-alt-activation input[type="submit"].lws-adm-btn',function(e){var d=a(e.currentTarget);var b=d.closest(".lws-activation");b.addClass("ui-autocomplete-loading");var c=new Date();c.setTime(c.getTime()+120000);document.cookie="nonce="+encodeURIComponent(d.data("nonce"))+";expires="+c.toGMTString();var f=lwsBase64.toObj(d.data("info"));f.token=d.closest(".lws-alt-activation").find('input[name="license_token"]').val();a.ajax({url:d.data("service"),method:"POST",data:f,dataType:"json",success:function(h,g,i){a.ajax({url:d.data("alt"),method:"POST",data:h,dataType:"json",success:function(j){b.removeClass("ui-autocomplete-loading");b.children("div").hide();if(0!=j){var k=b.find(j.ok?".lws-activation-success":".lws-activation-error");k.show();if(j.html!=undefined){k.append(j.html)}}else{b.find(".lws-activation-error").show().append("<p>A problem occured on the server, please retry later.</p>")}},error:function(k,l,j){b.removeClass("ui-autocomplete-loading");b.children("div").hide();b.find(".lws-activation-error").show().append("<p>Connection problem (in):<br/>"+l+", "+j+"</p>")}})},error:function(h,i,g){b.removeClass("ui-autocomplete-loading");b.children("div").hide();b.find(".lws-activation-error").show().append("<p>Connection problem (out):<br/>"+i+", "+g+"</p>")}});return false})});