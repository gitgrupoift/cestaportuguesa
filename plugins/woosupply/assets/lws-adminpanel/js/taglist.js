(function(a){a.widget("custom.lws_taglist",{_create:function(){var c=this;this.container=this.element.parent();this.valueList=this.element.val().split(";");for(var b=0;b<this.valueList.length;b++){if(this.valueList[b]==""){this.valueList.splice(b,1)}}this._createStructure();this._fillList();this.container.on("click",".lws-tag-remove",this._bind(this._delTag,this));this.container.on("click",".lws-taglist-btadd",this._bind(this._addTags,this));this.container.on("keypress",".lws-taglist-input",function(d){if(d.which==13){c.container.find(".lws-taglist-btadd").trigger("click")}})},_bind:function(b,c){return function(){return b.apply(c,arguments)}},_createStructure:function(){a("<div>",{"class":"lws-taglist-wrapper"}).append(a("<div>",{"class":"lws-taglist-top"}).append(a("<input>",{type:"text","class":"lws-input lws-taglist-input"})).append(a("<a>",{"class":"lws-taglist-btadd",html:this.element.data("btlabel")}))).append(a("<div>",{"class":"lws-taglist-bottom"})).appendTo(this.container)},_fillList:function(){var c=this;var d=this.container.find(".lws-taglist-bottom");d.empty();for(var b=0;b<this.valueList.length;b++){a("<div>",{"class":"lws-tag-wrapper","data-index":b}).append(a("<div>",{"class":"lws-tag-text",html:this.valueList[b]})).append(a("<a>",{"class":"lws-tag-remove lws-icon-cross"})).appendTo(d)}},_delTag:function(c){var b=a(c.currentTarget).parent();this.valueList.splice(b.data("index"),1);b.remove();this._updateList()},_addTags:function(b){var c=this.valueList.concat(a(b.currentTarget).parent().find(".lws-taglist-input").val().split(","));this.valueList=c.filter(function(f,e,d){return e===d.indexOf(f)});a(b.currentTarget).parent().find(".lws-taglist-input").val("");this._fillList();this._updateList()},_updateList:function(){var c="";for(var b=0;b<this.valueList.length;b++){c+=this.valueList[b]+";"}c=c.slice(0,-1);this.element.val(c)}})})(jQuery);jQuery(function(a){a(".lws_taglist").lws_taglist()});