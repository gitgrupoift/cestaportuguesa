jQuery(function(c){function a(d,f){var e=d.url;if(typeof d.sizes!="undefined"&&d.sizes[f]){e=d.sizes[f].url}return e}function b(d,f,h,g){var e="";if(f=="image"){e="<img src='"+a(d,h)+"'";e+=" alt='"+(typeof d.alt!="undefined"?d.alt:"")+"'";e+=" title='"+(typeof d.title!="undefined"?d.title:"")+"'";e+=" class='attachment-"+g+" size-"+g+"'>"}return e}c(".lws_adminpanel_btn_add_media").click(function(f){f.preventDefault();var d=c(f.target);if(d.data("gk_frame")!=undefined){d.data("gk_frame").open();return}var e=wp.media({title:d.data("title"),multiple:false,library:{type:d.data("type")},button:{text:d.data("pick")}});e.on("select",function(){var h=d.data("gk_frame").state().get("selection");if(!h){return}var j=h.first();var g=d.closest(".lws_media_master");var i=g.find(".lws_adminpanel_btn_add_media");g.find(".lws-adm-media").show().html(b(j.attributes,d.data("type"),d.data("image-size"),d.data("class-size")));g.find(".lws_adminpanel_input_media_url").val(a(j.attributes,d.data("image-size")));g.find(".lws_adminpanel_input_media_id").val(j.attributes.id).trigger("change");i.removeClass("lws-media-add").addClass("lws-media-edit").val(i.data("edit"));g.find(".lws_adminpanel_btn_del_media").show()});d.data("gk_frame",e);d.data("gk_frame").open()});c(".lws_adminpanel_btn_del_media").click(function(e){e.preventDefault();var d=c(this).closest(".lws_media_master");var f=d.find(".lws_adminpanel_btn_add_media");d.find(".lws-adm-media").html("").hide();f.removeClass("lws-media-edit").addClass("lws-media-add").val(f.data("add"));d.find(".lws_adminpanel_btn_del_media").hide();d.find(".lws_adminpanel_input_media_url").val("");d.find(".lws_adminpanel_input_media_id").val("").trigger("change");c(this).hide()});c(".lws_adminpanel_input_media_url").change(function(){var f=c(this).val();var d=c(this).closest(".lws_media_master");if(f!=undefined&&f!=""){var e=d.find(".lws_adminpanel_btn_add_media");d.find(".lws-adm-media").html(b({url:f},e.data("type"),e.data("image-size"),e.data("class-size")));d.find(".lws-adm-media").show();e.removeClass("lws-media-add").addClass("lws-media-edit").val(e.data("edit"));d.find(".lws_adminpanel_btn_del_media").show()}else{d.find(".lws_adminpanel_btn_del_media").trigger("click")}})});